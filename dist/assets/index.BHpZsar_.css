.theme-toggle{display:inline-flex;align-items:center;justify-content:center;gap:var(--spacing-2);padding:var(--spacing-2);background-color:var(--color-bg-elevated);color:var(--color-text-primary);border:1px solid var(--color-divider);border-radius:var(--radius-md);cursor:pointer;transition:all var(--duration-fast) var(--easing-base);position:relative;overflow:hidden}.theme-toggle:hover{background-color:var(--color-action-hover);border-color:var(--color-primary-main)}.theme-toggle:active{transform:scale(.95)}.theme-toggle:focus-visible{outline:2px solid var(--color-primary-main);outline-offset:2px}.theme-toggle--small{padding:var(--spacing-1);font-size:.75rem}.theme-toggle--small .theme-toggle__icon{width:16px;height:16px}.theme-toggle--medium{padding:var(--spacing-2);font-size:.875rem}.theme-toggle--medium .theme-toggle__icon{width:20px;height:20px}.theme-toggle--large{padding:var(--spacing-3);font-size:1rem}.theme-toggle--large .theme-toggle__icon{width:24px;height:24px}.theme-toggle__icon-wrapper{display:flex;align-items:center;justify-content:center;position:relative}.theme-toggle__icon{display:block;transition:transform var(--duration-base) var(--easing-base),opacity var(--duration-base) var(--easing-base)}.theme-toggle__icon--sun{animation:rotate 20s linear infinite}.theme-toggle__icon--moon{animation:wiggle 4s ease-in-out infinite}.theme-toggle__label{font-weight:500;white-space:nowrap}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes wiggle{0%,to{transform:rotate(-5deg)}50%{transform:rotate(5deg)}}.theme-toggle:hover .theme-toggle__icon{transform:scale(1.1)}.theme-toggle:active .theme-toggle__icon{transform:scale(.9)}.theme-toggle:disabled{opacity:.5;cursor:not-allowed}.theme-toggle:disabled:hover{background-color:var(--color-bg-elevated);border-color:var(--color-divider);transform:none}.theme-dark .theme-toggle{background-color:var(--color-bg-elevated);border-color:var(--color-divider)}.theme-dark .theme-toggle:hover{background-color:#ffffff1a;border-color:var(--color-primary-light)}@media (prefers-contrast: high){.theme-toggle{border-width:2px}.theme-toggle:focus-visible{outline-width:3px}}@media (prefers-reduced-motion: reduce){.theme-toggle__icon--sun,.theme-toggle__icon--moon{animation:none}.theme-toggle,.theme-toggle__icon{transition:none}}.viewer-layout{display:flex;flex-direction:column;height:100vh;width:100%;background-color:var(--color-bg-default);color:var(--color-text-primary);overflow:hidden}.viewer-layout__header{display:flex;align-items:center;justify-content:space-between;height:56px;padding:0 var(--spacing-4);background-color:var(--color-bg-paper);border-bottom:1px solid var(--color-divider);box-shadow:var(--shadow-sm);z-index:var(--z-sticky)}.viewer-layout__header-content{display:flex;align-items:center;flex:1}.viewer-layout__header-actions{display:flex;align-items:center;gap:var(--spacing-2)}.viewer-layout__body{display:flex;flex:1;overflow:hidden}.viewer-layout__tool-panel{position:relative;width:280px;background-color:var(--color-bg-paper);border-right:1px solid var(--color-divider);transition:width var(--duration-base) var(--easing-base),transform var(--duration-base) var(--easing-base);overflow:hidden}.viewer-layout__tool-panel--collapsed{width:48px}.viewer-layout__side-panel{position:relative;width:320px;background-color:var(--color-bg-paper);border-left:1px solid var(--color-divider);transition:width var(--duration-base) var(--easing-base),transform var(--duration-base) var(--easing-base);overflow:hidden}.viewer-layout__side-panel--collapsed{width:48px}.viewer-layout__panel-content{height:100%;overflow-y:auto;overflow-x:hidden;padding:var(--spacing-4);opacity:1;transition:opacity var(--duration-fast) var(--easing-base)}.viewer-layout__tool-panel--collapsed .viewer-layout__panel-content,.viewer-layout__side-panel--collapsed .viewer-layout__panel-content{opacity:0;pointer-events:none}.default-viewport{display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:linear-gradient(135deg,var(--color-bg-default) 0%,var(--color-bg-muted) 100%);border:2px dashed var(--color-divider);border-radius:var(--radius-lg)}.default-viewport__content{text-align:center;padding:var(--spacing-8);max-width:400px}.default-viewport__icon{margin-bottom:var(--spacing-4);color:var(--color-primary-main);opacity:.7}.default-viewport__content h3{margin-bottom:var(--spacing-2);color:var(--color-text-primary);font-size:1.5rem;font-weight:600}.default-viewport__content p{margin-bottom:var(--spacing-6);color:var(--color-text-secondary);font-size:1rem}.default-viewport__features{display:flex;flex-direction:column;gap:var(--spacing-2);align-items:flex-start;text-align:left}.default-viewport__features span{color:var(--color-text-tertiary);font-size:.875rem;opacity:.8}.viewer-layout__panel-toggle{position:absolute;top:50%;transform:translateY(-50%);width:24px;height:48px;display:flex;align-items:center;justify-content:center;background-color:var(--color-bg-elevated);border:1px solid var(--color-divider);cursor:pointer;z-index:1;transition:all var(--duration-fast) var(--easing-base)}.viewer-layout__panel-toggle:hover{background-color:var(--color-action-hover);border-color:var(--color-primary-main)}.viewer-layout__panel-toggle:focus-visible{outline:2px solid var(--color-primary-main);outline-offset:-2px}.viewer-layout__panel-toggle svg{width:16px;height:16px;color:var(--color-text-secondary)}.viewer-layout__panel-toggle--left{right:-12px;border-radius:0 var(--radius-base) var(--radius-base) 0}.viewer-layout__panel-toggle--right{left:-12px;border-radius:var(--radius-base) 0 0 var(--radius-base)}.viewer-layout__main{flex:1;display:flex;flex-direction:column;overflow:hidden;background-color:var(--color-bg-default)}.viewer-layout__viewport-container{flex:1;position:relative;overflow:hidden}.viewer-layout__footer{height:32px;display:flex;align-items:center;padding:0 var(--spacing-4);background-color:var(--color-bg-paper);border-top:1px solid var(--color-divider);font-size:.75rem;color:var(--color-text-secondary)}@media (max-width: 1280px){.viewer-layout__tool-panel{width:240px}.viewer-layout__side-panel{width:280px}}@media (max-width: 1024px){.viewer-layout__tool-panel{width:200px}.viewer-layout__side-panel{width:240px}}@media (max-width: 768px){.viewer-layout__header{height:48px;padding:0 var(--spacing-2)}.viewer-layout__tool-panel,.viewer-layout__side-panel{position:absolute;height:100%;z-index:var(--z-modal);box-shadow:var(--shadow-xl)}.viewer-layout__tool-panel{left:0;transform:translate(-100%)}.viewer-layout__tool-panel:not(.viewer-layout__tool-panel--collapsed){transform:translate(0)}.viewer-layout__side-panel{right:0;transform:translate(100%)}.viewer-layout__side-panel:not(.viewer-layout__side-panel--collapsed){transform:translate(0)}.viewer-layout__panel-toggle--left{right:-48px}.viewer-layout__panel-toggle--right{left:-48px}}.viewer-layout__panel-content::-webkit-scrollbar{width:6px}.viewer-layout__panel-content::-webkit-scrollbar-track{background:transparent}.viewer-layout__panel-content::-webkit-scrollbar-thumb{background:var(--color-divider);border-radius:var(--radius-base)}.viewer-layout__panel-content::-webkit-scrollbar-thumb:hover{background:var(--color-text-disabled)}@media (prefers-contrast: high){.viewer-layout__header,.viewer-layout__tool-panel,.viewer-layout__side-panel,.viewer-layout__footer,.viewer-layout__panel-toggle{border-width:2px}}@media (prefers-reduced-motion: reduce){.viewer-layout__tool-panel,.viewer-layout__side-panel,.viewer-layout__panel-content,.viewer-layout__panel-toggle{transition:none}}@media print{.viewer-layout__header,.viewer-layout__tool-panel,.viewer-layout__side-panel,.viewer-layout__footer,.viewer-layout__panel-toggle{display:none!important}.viewer-layout__main{width:100%;height:auto}}.series-browser{display:flex;flex-direction:column;height:100%;background-color:var(--color-bg-default);border-radius:var(--radius-lg);overflow:hidden}.series-browser__header{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-4);background-color:var(--color-bg-elevated);border-bottom:1px solid var(--color-divider)}.series-browser__title h3{margin:0;color:var(--color-text-primary);font-size:1.125rem;font-weight:600}.series-browser__count{color:var(--color-text-secondary);font-size:.875rem;margin-left:var(--spacing-2)}.series-browser__controls{display:flex;align-items:center;gap:var(--spacing-3)}.series-browser__filter,.series-browser__sort{padding:var(--spacing-2) var(--spacing-3);border:1px solid var(--color-divider);border-radius:var(--radius-base);background-color:var(--color-bg-default);color:var(--color-text-primary);font-size:.875rem;min-width:120px}.series-browser__filter:focus,.series-browser__sort:focus{outline:2px solid var(--color-primary-main);outline-offset:1px}.series-browser__view-toggle{display:flex;border:1px solid var(--color-divider);border-radius:var(--radius-base);overflow:hidden}.view-toggle__btn{padding:var(--spacing-2);border:none;background-color:var(--color-bg-default);color:var(--color-text-secondary);cursor:pointer;transition:all var(--duration-fast) var(--easing-base);display:flex;align-items:center;justify-content:center}.view-toggle__btn:hover{background-color:var(--color-bg-muted);color:var(--color-text-primary)}.view-toggle__btn--active{background-color:var(--color-primary-main);color:var(--color-primary-contrast)}.series-browser__content{flex:1;padding:var(--spacing-4);overflow-y:auto;overflow-x:hidden}.series-browser__content--grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:var(--spacing-4)}.series-browser__content--list{display:flex;flex-direction:column;gap:var(--spacing-3)}.series-browser__content--list .series-item{flex-direction:row;align-items:center;padding:var(--spacing-3)}.series-browser__content--list .series-item__thumbnail{width:80px;height:80px;margin-right:var(--spacing-4);flex-shrink:0}.series-browser__content--list .series-item__info{flex:1;text-align:left}.series-item{display:flex;flex-direction:column;background-color:var(--color-bg-elevated);border:1px solid var(--color-divider);border-radius:var(--radius-lg);overflow:hidden;cursor:pointer;transition:all var(--duration-fast) var(--easing-base);position:relative}.series-item:hover{border-color:var(--color-primary-main);box-shadow:var(--shadow-md);transform:translateY(-2px)}.series-item--selected{border-color:var(--color-primary-main);background-color:var(--color-primary-bg);box-shadow:var(--shadow-lg)}.series-item__thumbnail{position:relative;width:100%;height:150px;background-color:var(--color-bg-muted);overflow:hidden}.series-item__thumbnail img{width:100%;height:100%;object-fit:cover;transition:transform var(--duration-base) var(--easing-base)}.series-item:hover .series-item__thumbnail img{transform:scale(1.05)}.series-item__overlay{position:absolute;top:var(--spacing-2);right:var(--spacing-2);display:flex;flex-direction:column;gap:var(--spacing-1)}.series-item__modality,.series-item__count{padding:var(--spacing-1) var(--spacing-2);background-color:#000c;color:#fff;font-size:.75rem;font-weight:600;border-radius:var(--radius-sm);backdrop-filter:blur(4px)}.series-item__modality{background-color:var(--color-primary-main)}.series-item__info{padding:var(--spacing-4);text-align:center;flex:1}.series-item__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-2)}.series-item__number{font-size:.875rem;font-weight:600;color:var(--color-text-secondary)}.series-item__modality-badge{padding:var(--spacing-1) var(--spacing-2);background-color:var(--color-primary-bg);color:var(--color-primary-main);font-size:.75rem;font-weight:600;border-radius:var(--radius-full)}.series-item__title{margin:0 0 var(--spacing-2) 0;color:var(--color-text-primary);font-size:1rem;font-weight:600;line-height:1.2;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.series-item__details{color:var(--color-text-secondary);font-size:.875rem;margin:0}.series-item__metadata{margin-top:var(--spacing-3);display:flex;flex-direction:column;gap:var(--spacing-1);text-align:left}.series-item__metadata span{color:var(--color-text-tertiary);font-size:.75rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.series-item__actions{position:absolute;top:var(--spacing-2);left:var(--spacing-2);opacity:0;transition:opacity var(--duration-fast) var(--easing-base)}.series-item:hover .series-item__actions{opacity:1}.series-item__action{padding:var(--spacing-2);background-color:var(--color-primary-main);color:var(--color-primary-contrast);border:none;border-radius:var(--radius-full);cursor:pointer;transition:all var(--duration-fast) var(--easing-base);display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-md)}.series-item__action:hover{background-color:var(--color-primary-dark);transform:scale(1.1)}.series-browser__loading{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:var(--color-text-secondary)}.series-browser__loading .loading-spinner{width:32px;height:32px;border:3px solid var(--color-divider);border-top:3px solid var(--color-primary-main);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:var(--spacing-4)}.series-browser__empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:var(--color-text-secondary);text-align:center}.series-browser__empty svg{margin-bottom:var(--spacing-4);opacity:.5}.series-browser__empty p{margin:0 0 var(--spacing-2) 0;font-size:1.125rem;font-weight:600}.series-browser__empty span{font-size:.875rem;opacity:.7}@media (max-width: 768px){.series-browser__header{flex-direction:column;gap:var(--spacing-3);align-items:stretch}.series-browser__controls{justify-content:space-between}.series-browser__content--grid{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:var(--spacing-3)}.series-item__thumbnail{height:120px}.series-browser__content--list .series-item__thumbnail{width:60px;height:60px}}@media (max-width: 480px){.series-browser__content--grid{grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:var(--spacing-2)}.series-browser__content{padding:var(--spacing-3)}}@media (prefers-reduced-motion: reduce){.series-item,.series-item__thumbnail img,.view-toggle__btn,.series-item__action{transition:none}.loading-spinner{animation:none}.series-item:hover,.series-item:hover .series-item__thumbnail img{transform:none}}@media (prefers-contrast: high){.series-item{border-width:2px}.series-item--selected{border-width:3px}}.series-item:focus-visible{outline:2px solid var(--color-primary-main);outline-offset:2px}.series-item__action:focus-visible{outline:2px solid var(--color-primary-contrast);outline-offset:2px}.tool-panel{height:100%;display:flex;flex-direction:column;background-color:var(--color-bg-paper);color:var(--color-text-primary)}.tool-panel__title{font-size:1.25rem;font-weight:600;margin-bottom:var(--spacing-4);padding-bottom:var(--spacing-2);border-bottom:1px solid var(--color-divider);color:var(--color-text-primary)}.tool-panel__categories{flex:1;overflow-y:auto}.tool-panel__category{margin-bottom:var(--spacing-2)}.tool-panel__category-header{width:100%;display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-2) var(--spacing-1);background:none;border:none;text-align:left;font-size:.875rem;font-weight:500;color:var(--color-text-secondary);cursor:pointer;border-radius:var(--radius-base);transition:all var(--duration-fast) var(--easing-base)}.tool-panel__category-header:hover{background-color:var(--color-action-hover);color:var(--color-text-primary)}.tool-panel__category-header:focus-visible{outline:2px solid var(--color-primary-main);outline-offset:-2px}.tool-panel__category-name{font-weight:500}.tool-panel__category-icon{width:16px;height:16px;transition:transform var(--duration-fast) var(--easing-base)}.tool-panel__category-icon--expanded{transform:rotate(180deg)}.tool-panel__tools{padding-left:var(--spacing-2);animation:slideDown var(--duration-base) var(--easing-base)}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.tool-panel__tool{width:100%;display:flex;align-items:center;gap:var(--spacing-3);padding:var(--spacing-2) var(--spacing-3);margin-bottom:var(--spacing-1);background:none;border:1px solid transparent;border-radius:var(--radius-base);text-align:left;cursor:pointer;transition:all var(--duration-fast) var(--easing-base);position:relative}.tool-panel__tool:hover:not(.tool-panel__tool--disabled){background-color:var(--color-action-hover);border-color:var(--color-primary-main)}.tool-panel__tool:focus-visible{outline:2px solid var(--color-primary-main);outline-offset:-2px}.tool-panel__tool--active{background-color:var(--color-primary-main);color:var(--color-primary-contrast);border-color:var(--color-primary-dark)}.tool-panel__tool--active:hover{background-color:var(--color-primary-dark)}.tool-panel__tool--disabled{opacity:.5;cursor:not-allowed;color:var(--color-text-disabled)}.tool-panel__tool-icon{width:20px;height:20px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.tool-panel__tool-icon svg{width:100%;height:100%}.tool-panel__tool-name{flex:1;font-size:.875rem;font-weight:400}.tool-panel__tool-hotkey{font-size:.75rem;font-weight:500;padding:2px 6px;background-color:var(--color-bg-elevated);color:var(--color-text-secondary);border-radius:var(--radius-sm);font-family:SF Mono,Monaco,Consolas,monospace;opacity:.7;transition:opacity var(--duration-fast) var(--easing-base)}.tool-panel__tool:hover .tool-panel__tool-hotkey:not(.tool-panel__tool--disabled){opacity:1}.tool-panel__tool--active .tool-panel__tool-hotkey{background-color:#fff3;color:var(--color-primary-contrast);opacity:1}.tool-panel__help{margin-top:auto;padding-top:var(--spacing-4);border-top:1px solid var(--color-divider)}.tool-panel__help-text{font-size:.75rem;color:var(--color-text-secondary);line-height:1.4;margin:0}@media (max-width: 1024px){.tool-panel__tool{padding:var(--spacing-2)}.tool-panel__tool-name{font-size:.8125rem}.tool-panel__tool-hotkey{display:none}}@media (max-width: 768px){.tool-panel__title{font-size:1.125rem;margin-bottom:var(--spacing-3)}.tool-panel__tool{flex-direction:column;align-items:flex-start;gap:var(--spacing-1)}.tool-panel__tool-icon{width:18px;height:18px}.tool-panel__tool-name{font-size:.75rem}}.tool-panel__categories::-webkit-scrollbar{width:4px}.tool-panel__categories::-webkit-scrollbar-track{background:transparent}.tool-panel__categories::-webkit-scrollbar-thumb{background:var(--color-divider);border-radius:var(--radius-base)}.tool-panel__categories::-webkit-scrollbar-thumb:hover{background:var(--color-text-disabled)}@media (prefers-contrast: high){.tool-panel__tool{border-width:2px}.tool-panel__tool--active{border-width:3px}.tool-panel__category-header{border:1px solid transparent}.tool-panel__category-header:hover,.tool-panel__category-header:focus-visible{border-color:var(--color-text-primary)}}@media (prefers-reduced-motion: reduce){.tool-panel__category-icon,.tool-panel__tool,.tool-panel__category-header,.tool-panel__tool-hotkey{transition:none}.tool-panel__tools{animation:none}@keyframes slideDown{0%,to{opacity:1;transform:none}}}.study-comparison{display:flex;flex-direction:column;height:100%;background-color:var(--color-bg-default);border-radius:var(--radius-lg);overflow:hidden}.study-comparison__header{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-4);background-color:var(--color-bg-elevated);border-bottom:1px solid var(--color-divider)}.study-comparison__title h3{margin:0;color:var(--color-text-primary);font-size:1.125rem;font-weight:600}.study-comparison__count{color:var(--color-text-secondary);font-size:.875rem;margin-left:var(--spacing-2)}.study-comparison__controls{display:flex;align-items:center;gap:var(--spacing-3)}.view-mode-selector{display:flex;align-items:center;gap:var(--spacing-2)}.view-mode-selector label{color:var(--color-text-secondary);font-size:.875rem;font-weight:500}.view-mode-selector select{padding:var(--spacing-2) var(--spacing-3);border:1px solid var(--color-divider);border-radius:var(--radius-base);background-color:var(--color-bg-default);color:var(--color-text-primary);font-size:.875rem}.toggle-btn,.clear-btn{display:flex;align-items:center;gap:var(--spacing-2);padding:var(--spacing-2) var(--spacing-3);border:1px solid var(--color-divider);border-radius:var(--radius-base);background-color:var(--color-bg-default);color:var(--color-text-secondary);font-size:.875rem;cursor:pointer;transition:all var(--duration-fast) var(--easing-base)}.toggle-btn:hover,.clear-btn:hover{background-color:var(--color-bg-muted);color:var(--color-text-primary)}.toggle-btn--active{background-color:var(--color-primary-main);color:var(--color-primary-contrast);border-color:var(--color-primary-main)}.clear-btn:disabled{opacity:.5;cursor:not-allowed}.clear-btn:disabled:hover{background-color:var(--color-bg-default);color:var(--color-text-secondary)}.study-comparison__body{flex:1;display:flex;overflow:hidden}.study-list-panel{width:300px;background-color:var(--color-bg-elevated);border-right:1px solid var(--color-divider);display:flex;flex-direction:column}.study-list-panel__header{padding:var(--spacing-4);border-bottom:1px solid var(--color-divider);display:flex;justify-content:space-between;align-items:center}.study-list-panel__header h4{margin:0;color:var(--color-text-primary);font-size:1rem;font-weight:600}.study-count{color:var(--color-text-secondary);font-size:.75rem}.study-list{flex:1;overflow-y:auto;padding:var(--spacing-2)}.study-list__empty{display:flex;align-items:center;justify-content:center;height:120px;color:var(--color-text-secondary);text-align:center}.study-item{display:flex;gap:var(--spacing-3);padding:var(--spacing-3);border:1px solid var(--color-divider);border-radius:var(--radius-base);background-color:var(--color-bg-default);cursor:grab;transition:all var(--duration-fast) var(--easing-base);margin-bottom:var(--spacing-2)}.study-item:hover{border-color:var(--color-primary-main);box-shadow:var(--shadow-sm)}.study-item--selected{border-color:var(--color-primary-main);background-color:var(--color-primary-bg)}.study-item:active{cursor:grabbing}.study-item__thumbnail{width:48px;height:48px;border-radius:var(--radius-base);overflow:hidden;flex-shrink:0}.study-item__thumbnail img{width:100%;height:100%;object-fit:cover}.study-item__info{flex:1;min-width:0}.study-item__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-1)}.study-item__modality{padding:var(--spacing-1) var(--spacing-2);background-color:var(--color-primary-bg);color:var(--color-primary-main);font-size:.75rem;font-weight:600;border-radius:var(--radius-full)}.study-item__date{color:var(--color-text-secondary);font-size:.75rem}.study-item__description{margin:0 0 var(--spacing-1) 0;color:var(--color-text-primary);font-size:.875rem;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.study-item__patient{margin:0 0 var(--spacing-1) 0;color:var(--color-text-secondary);font-size:.75rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.study-item__details{margin:0;color:var(--color-text-tertiary);font-size:.75rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.comparison-grid{flex:1;display:grid;gap:var(--spacing-3);padding:var(--spacing-4);overflow:auto}.comparison-grid--2x1{grid-template-columns:1fr 1fr;grid-template-rows:1fr}.comparison-grid--2x2{grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr}.comparison-grid--1x4{grid-template-columns:repeat(4,1fr);grid-template-rows:1fr}.comparison-slot{border:2px dashed var(--color-divider);border-radius:var(--radius-lg);background-color:var(--color-bg-elevated);transition:all var(--duration-fast) var(--easing-base);overflow:hidden;min-height:200px}.comparison-slot--active{border-color:var(--color-primary-main);border-style:solid;box-shadow:var(--shadow-md)}.comparison-slot:hover{border-color:var(--color-primary-light)}.comparison-slot__content{height:100%;display:flex;flex-direction:column}.comparison-slot__header{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-3);background-color:var(--color-bg-muted);border-bottom:1px solid var(--color-divider)}.slot-info{display:flex;gap:var(--spacing-2);align-items:center}.slot-modality{padding:var(--spacing-1) var(--spacing-2);background-color:var(--color-primary-main);color:var(--color-primary-contrast);font-size:.75rem;font-weight:600;border-radius:var(--radius-full)}.slot-date{color:var(--color-text-secondary);font-size:.75rem}.slot-actions{display:flex;gap:var(--spacing-1)}.slot-action{padding:var(--spacing-1);border:none;border-radius:var(--radius-base);background-color:var(--color-bg-default);color:var(--color-text-secondary);cursor:pointer;transition:all var(--duration-fast) var(--easing-base);display:flex;align-items:center;justify-content:center}.slot-action:hover{background-color:var(--color-primary-main);color:var(--color-primary-contrast)}.slot-action--remove:hover{background-color:var(--color-error-main);color:var(--color-error-contrast)}.comparison-slot__viewer{flex:1;display:flex;align-items:center;justify-content:center;padding:var(--spacing-4)}.slot-placeholder{text-align:center;max-width:100%}.slot-placeholder__content{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-3)}.slot-placeholder__content img{width:64px;height:64px;border-radius:var(--radius-base)}.slot-placeholder__info h6{margin:0 0 var(--spacing-1) 0;color:var(--color-text-primary);font-size:.875rem;font-weight:600}.slot-placeholder__info p{margin:0 0 var(--spacing-1) 0;color:var(--color-text-secondary);font-size:.75rem}.slot-placeholder__info span{color:var(--color-text-tertiary);font-size:.75rem}.comparison-slot__footer{padding:var(--spacing-2) var(--spacing-3);background-color:var(--color-bg-muted);border-top:1px solid var(--color-divider);display:flex;justify-content:space-between;align-items:center}.slot-position{color:var(--color-text-secondary);font-size:.75rem;font-weight:600}.slot-description{color:var(--color-text-primary);font-size:.75rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1;text-align:right;margin-left:var(--spacing-2)}.comparison-slot__empty{height:100%;display:flex;align-items:center;justify-content:center;text-align:center;color:var(--color-text-secondary)}.empty-slot-content{padding:var(--spacing-6)}.empty-slot-content svg{margin-bottom:var(--spacing-4);opacity:.5}.empty-slot-content h4{margin:0 0 var(--spacing-2) 0;color:var(--color-text-primary);font-size:1rem;font-weight:600}.empty-slot-content p{margin:0 0 var(--spacing-1) 0;font-size:.875rem}.empty-slot-content span{font-size:.75rem;opacity:.7}.comparison-slot[data-drag-over=true]{border-color:var(--color-primary-main);background-color:var(--color-primary-bg);transform:scale(1.02)}@media (max-width: 1200px){.study-list-panel{width:250px}.comparison-grid--1x4{grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr}}@media (max-width: 768px){.study-comparison__header{flex-direction:column;gap:var(--spacing-3);align-items:stretch}.study-comparison__controls{justify-content:space-between}.study-list-panel{width:100%;max-height:200px}.study-comparison__body{flex-direction:column}.comparison-grid{grid-template-columns:1fr;grid-template-rows:repeat(auto,1fr)}.comparison-grid--2x1,.comparison-grid--2x2,.comparison-grid--1x4{grid-template-columns:1fr}}.comparison-slot:focus-visible{outline:2px solid var(--color-primary-main);outline-offset:2px}.study-item:focus-visible{outline:2px solid var(--color-primary-main);outline-offset:2px}@media (prefers-contrast: high){.comparison-slot{border-width:3px}.comparison-slot--active{border-width:4px}}@media (prefers-reduced-motion: reduce){.comparison-slot,.study-item,.slot-action,.toggle-btn,.clear-btn{transition:none}.comparison-slot[data-drag-over=true]{transform:none}}.viewer-tabs{position:relative;background-color:var(--color-bg-elevated);border-bottom:1px solid var(--color-divider)}.viewer-tabs__container{display:flex;position:relative}.viewer-tab{display:flex;align-items:center;gap:var(--spacing-2);padding:var(--spacing-3) var(--spacing-4);border:none;background:none;color:var(--color-text-secondary);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--duration-fast) var(--easing-base);position:relative;flex:1;justify-content:center;min-width:120px}.viewer-tab:hover{color:var(--color-text-primary);background-color:var(--color-bg-muted)}.viewer-tab--active{color:var(--color-primary-main);background-color:var(--color-primary-bg)}.viewer-tab__icon{display:flex;align-items:center;justify-content:center;transition:transform var(--duration-fast) var(--easing-base)}.viewer-tab:hover .viewer-tab__icon{transform:scale(1.1)}.viewer-tab--active .viewer-tab__icon{transform:scale(1.15)}.viewer-tab__label{font-weight:600}.viewer-tabs__indicator{position:absolute;bottom:0;left:0;width:100%;height:3px;overflow:hidden}.indicator{width:calc(100% / 3);height:100%;background-color:var(--color-primary-main);transition:transform var(--duration-base) var(--easing-base);border-radius:var(--radius-full) var(--radius-full) 0 0}@media (max-width: 768px){.viewer-tab{padding:var(--spacing-2) var(--spacing-3);min-width:80px}.viewer-tab__label{display:none}.viewer-tab__icon{margin:0}}.viewer-tab:focus-visible{outline:2px solid var(--color-primary-main);outline-offset:-2px}@media (prefers-reduced-motion: reduce){.viewer-tab,.viewer-tab__icon,.indicator{transition:none}.viewer-tab:hover .viewer-tab__icon,.viewer-tab--active .viewer-tab__icon{transform:none}}.sample-data-loader{background:var(--color-bg-paper);border-radius:var(--radius-md);border:1px solid var(--color-divider);padding:1rem;max-width:600px;margin:0 auto}.sample-data-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid var(--color-divider)}.sample-data-header h3{margin:0;color:var(--color-text-primary);font-size:1.2rem;font-weight:600}.sample-data-stats{display:flex;gap:1rem}.sample-data-stats .stat{font-size:.875rem;color:var(--color-text-secondary);background:var(--color-bg-elevated);padding:.25rem .5rem;border-radius:var(--radius-sm)}.sample-data-actions{display:flex;gap:.5rem;margin-bottom:1.5rem}.btn{padding:.5rem 1rem;border-radius:var(--radius-base);border:1px solid transparent;font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--duration-fast) var(--easing-base);display:inline-flex;align-items:center;gap:.5rem}.btn:disabled{opacity:.6;cursor:not-allowed}.btn-primary{background:var(--color-primary-main);color:var(--color-primary-contrast);border-color:var(--color-primary-main)}.btn-primary:hover:not(:disabled){background:var(--color-primary-dark);border-color:var(--color-primary-dark)}.btn-secondary{background:var(--color-bg-elevated);color:var(--color-text-primary);border-color:var(--color-divider)}.btn-secondary:hover:not(:disabled){background:var(--color-bg-default);border-color:var(--color-text-secondary)}.btn-small{padding:.25rem .75rem;font-size:.75rem}.btn-outline{background:transparent;color:var(--color-primary-main);border-color:var(--color-primary-main)}.btn-outline:hover:not(:disabled){background:var(--color-primary-main);color:var(--color-primary-contrast)}.preload-indicator{display:flex;align-items:center;gap:.75rem;padding:1rem;background:var(--color-bg-elevated);border-radius:var(--radius-base);margin-bottom:1rem;border:1px solid var(--color-primary-light)}.loading-spinner{width:1rem;height:1rem;border:2px solid var(--color-divider);border-top:2px solid var(--color-primary-main);border-radius:50%;animation:spin 1s linear infinite}.sample-files-list{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1.5rem}.sample-file-item{border:1px solid var(--color-divider);border-radius:var(--radius-base);padding:1rem;background:var(--color-bg-elevated);transition:all var(--duration-fast) var(--easing-base)}.sample-file-item:hover{border-color:var(--color-primary-light);background:var(--color-bg-paper)}.file-header{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.file-info{flex:1}.file-title{display:flex;align-items:center;gap:.5rem;margin-bottom:.25rem}.modality-icon{font-size:1.2rem}.file-name{font-weight:600;color:var(--color-text-primary);font-size:1rem}.modality-badge{padding:.125rem .5rem;border-radius:var(--radius-sm);font-size:.75rem;font-weight:600;color:#fff;text-transform:uppercase}.file-description{color:var(--color-text-secondary);font-size:.875rem;margin-bottom:.5rem;line-height:1.4}.file-details{display:flex;gap:1rem;font-size:.75rem;color:var(--color-text-secondary)}.file-actions{display:flex;align-items:center;flex-shrink:0}.status-downloaded{color:#4caf50;font-weight:500;font-size:.875rem}.status-loading{color:var(--color-primary-main);font-weight:500;font-size:.875rem}.download-progress{margin-top:.75rem;padding-top:.75rem;border-top:1px solid var(--color-divider)}.progress-bar{width:100%;height:.5rem;background:var(--color-bg-default);border-radius:var(--radius-sm);overflow:hidden;margin-bottom:.5rem}.progress-fill{height:100%;background:var(--color-primary-main);border-radius:var(--radius-sm);transition:width var(--duration-base) var(--easing-base)}.progress-text{font-size:.75rem;color:var(--color-text-secondary);text-align:center}.sample-data-summary{background:var(--color-bg-elevated);border-radius:var(--radius-base);padding:1rem;border:1px solid var(--color-divider)}.sample-data-summary h4{margin:0 0 .75rem;color:var(--color-text-primary);font-size:1rem;font-weight:600}.data-summary{display:flex;flex-direction:column;gap:.5rem}.summary-item{display:flex;justify-content:space-between;align-items:center;font-size:.875rem}.summary-item .label{color:var(--color-text-secondary)}.summary-item .value{color:var(--color-text-primary);font-weight:500}@media (max-width: 768px){.sample-data-loader{padding:.75rem;margin:.5rem}.sample-data-header{flex-direction:column;align-items:flex-start;gap:.5rem}.sample-data-stats{flex-direction:column;gap:.25rem}.sample-data-actions{flex-direction:column;width:100%}.btn{width:100%;justify-content:center}.file-header{flex-direction:column;gap:.75rem}.file-actions{align-self:stretch}.file-details{flex-direction:column;gap:.25rem}}@media (prefers-color-scheme: dark){.sample-file-item:hover{background:var(--color-bg-default)}}*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}html{font-size:16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{font-family:var(--font-family);background-color:var(--color-bg-default);color:var(--color-text-primary);line-height:1.5;transition:background-color var(--duration-base) var(--easing-base),color var(--duration-base) var(--easing-base)}*:focus-visible{outline:2px solid var(--color-primary-main);outline-offset:2px}*:focus:not(:focus-visible){outline:none}h1,h2,h3,h4,h5,h6{font-weight:600;line-height:1.25;color:var(--color-text-primary)}h1{font-size:2.5rem}h2{font-size:2rem}h3{font-size:1.75rem}h4{font-size:1.5rem}h5{font-size:1.25rem}h6{font-size:1.125rem}p{margin-bottom:1rem;color:var(--color-text-primary)}a{color:var(--color-primary-main);text-decoration:none;transition:color var(--duration-fast) var(--easing-base)}a:hover{color:var(--color-primary-dark);text-decoration:underline}button{font-family:inherit;font-size:inherit;cursor:pointer;border:none;background:none;transition:all var(--duration-fast) var(--easing-base)}button:disabled{cursor:not-allowed;opacity:.6}input,textarea,select{font-family:inherit;font-size:inherit;line-height:inherit}img{max-width:100%;height:auto;display:block}.cornerstone-canvas{display:block;width:100%;height:100%;background-color:#000}.viewport-container{position:relative;width:100%;height:100%;background-color:#000;overflow:hidden}.annotation-text{font-family:var(--font-family);font-size:.875rem;font-weight:500;background-color:#000000b3;color:#fff;padding:2px 6px;border-radius:var(--radius-sm);user-select:none;pointer-events:none}.measurement-text{font-family:SF Mono,Monaco,Consolas,monospace;font-size:.875rem;font-weight:600;color:var(--color-medical-measurement);text-shadow:0 0 3px rgba(0,0,0,.8)}.loading-spinner{border:3px solid var(--color-divider);border-top:3px solid var(--color-primary-main);border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:var(--color-bg-default)}::-webkit-scrollbar-thumb{background:var(--color-divider);border-radius:var(--radius-base)}::-webkit-scrollbar-thumb:hover{background:var(--color-text-disabled)}::selection{background-color:var(--color-primary-main);color:var(--color-primary-contrast)}.tooltip{position:absolute;background-color:var(--color-bg-elevated);color:var(--color-text-primary);padding:4px 8px;border-radius:var(--radius-base);font-size:.75rem;box-shadow:var(--shadow-lg);z-index:var(--z-tooltip);pointer-events:none;white-space:nowrap}.transition-colors{transition:color var(--duration-base) var(--easing-base),background-color var(--duration-base) var(--easing-base),border-color var(--duration-base) var(--easing-base)}.transition-transform{transition:transform var(--duration-base) var(--easing-base)}.transition-opacity{transition:opacity var(--duration-base) var(--easing-base)}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}@media (prefers-contrast: high){*:focus-visible{outline-width:3px}.annotation-text{background-color:#000;border:1px solid #ffffff}}@media (prefers-reduced-motion: reduce){*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media print{body{background-color:#fff;color:#000}.no-print{display:none!important}}
